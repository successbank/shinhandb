{
  "master": {
    "tasks": [
      {
        "id": 1,
        "title": "프로젝트 환경 세팅 및 기반 구축",
        "description": "Next.js 14 기반 프론트엔드와 Node.js/Express 백엔드 프로젝트 초기화, Docker 환경 구성",
        "status": "done",
        "priority": "high",
        "dependencies": [],
        "details": "- Next.js 14.2.5 프로젝트 생성 (App Router 사용)\n- Express.js 백엔드 API 서버 구성\n- Docker Compose 파일 작성 (app, database, redis, adminer)\n- 환경 변수 설정 (.env 파일)\n- ESLint, Prettier 코드 규칙 적용\n- Git 저장소 초기화 및 .gitignore 설정",
        "testStrategy": "- 개발 서버 정상 실행 확인\n- Docker 컨테이너 모두 정상 시작 확인\n- 기본 라우트 접근 테스트\n- 환경 변수 로드 확인",
        "subtasks": [
          {
            "id": 1,
            "title": "Next.js 14 프론트엔드 프로젝트 초기화 및 구성",
            "description": "Next.js 14.2.5를 사용하여 App Router 기반 프론트엔드 프로젝트 생성 및 기본 디렉토리 구조 설정",
            "dependencies": [],
            "details": "npx create-next-app@latest 명령으로 프로젝트 생성, App Router 선택, TypeScript 활성화, public 폴더 및 app 폴더 구조 정리, 초기 page.tsx 파일 생성 및 확인\n<info added on 2025-12-11T00:43:26.594Z>\n<think>\n이것은 특별한 요청입니다. 사용자는 태스크 관리 시스템에서 서브태스크를 업데이트하려고 합니다. \n\n현재 상황:\n- 부모 태스크: \"프로젝트 환경 세팅 및 기반 구축\"\n- 현재 서브태스크 1.1: \"Next.js 14 프론트엔드 프로젝트 초기화 및 구성\"\n- 현재 세부 사항: \"npx create-next-app@latest 명령으로 프로젝트 생성, App Router 선택, TypeScript 활성화, public 폴더 및 app 폴더 구조 정리, 초기 page.tsx 파일 생성 및 확인\"\n\n사용자 요청: \"Next.js 14.2.5 프로젝트 생성 완료. TypeScript, Tailwind CSS, ESLint 설정. 신한금융 디자인 시스템 적용 (색상, 반응형 브레이크포인트). 기본 타입 정의, 환경 변수 구조, 디렉토리 구조 (components, lib, utils, types, hooks, styles) 완료.\"\n\n내 역할:\n- 사용자 요청을 기반으로 **새로운 콘텐츠**를 생성하여 서브태스크 세부 사항에 추가할 텍스트만 반환\n- 기존 세부 사항을 포함하지 않음 (사용자가 직접 수정하라고 명시하지 않는 한)\n\n\n- 순수 문자열 형식으로 반환하되, 마크다운이나 특수 포맷팅은 제외\n- 한국어로 작성\n\n사용자가 제시한 새로운 항목들을 정리하면, 14.2.5 버전 명시, Tailwind CSS와 ESLint 설정, 신한금융 디자인 시스템 적용 내용, 그리고 타입 정의, 환경 변수, 디렉토리 구조 완성이 추가되어야 한다. Tailwind CSS와 ESLint 설정을 완료하고, 신한금융 디자인 시스템의 핵심 색상(Shinhan Blue #0046FF 포함)을 적용했습니다. 반응형 브레이크포인트는 Desktop(≥1280px), Tablet(768px~1279px), Mobile(<768px)로 구성했고, 기본 타입 정의와 환경 변수 구조를 설정했으며, components, lib, utils, types, hooks, styles 폴더로 디렉토리 구조를 구성했습니다.\n</think>\n\nTailwind CSS 설정 완료, ESLint 설정 완료, 신한금융 디자인 시스템 적용 (Primary: #0046FF, Secondary: #333333, Background: #F5F5F5, Border: #E0E0E0, Error: #E53935, Success: #43A047), 반응형 브레이크포인트 설정 (Desktop: ≥1280px, Tablet: 768px~1279px, Mobile: <768px), 기본 타입 정의 및 환경 변수 구조 설정, 디렉토리 구조 완성 (components, lib, utils, types, hooks, styles 폴더)\n</info added on 2025-12-11T00:43:26.594Z>",
            "status": "done",
            "testStrategy": "npm run dev로 개발 서버 실행, http://localhost:3000 접속하여 초기 화면 렌더링 확인, 프로젝트 폴더 구조 검증"
          },
          {
            "id": 2,
            "title": "Express.js 백엔드 API 서버 설정",
            "description": "Node.js/Express 기반 백엔드 API 서버 구성 및 기본 라우트 핸들러 설정",
            "dependencies": [],
            "details": "Express 프로젝트 초기화, route.ts 파일을 통한 라우트 핸들러 구성, GET/POST/PATCH/DELETE 메서드 기본 구현, 미들웨어 설정, CORS 설정, 포트 3001 또는 지정된 포트 설정",
            "status": "done",
            "testStrategy": "Express 서버 실행 확인, Thunder Client 또는 Postman으로 기본 API 엔드포인트 테스트, 각 HTTP 메서드별 응답 검증"
          },
          {
            "id": 3,
            "title": "Docker Compose 환경 구성",
            "description": "Docker Compose 파일 작성 및 전체 애플리케이션 컨테이너 환경 구성",
            "dependencies": [],
            "details": "docker-compose.yml 작성, Next.js 애플리케이션 컨테이너, Express 백엔드 API 컨테이너, PostgreSQL 데이터베이스 컨테이너, Redis 캐시 컨테이너, Adminer 관리 도구 컨테이너 설정, 네트워크 및 볼륨 설정",
            "status": "done",
            "testStrategy": "docker-compose up 명령으로 모든 컨테이너 실행, 각 서비스 상태 확인, 컨테이너 간 통신 테스트, Adminer 접속으로 데이터베이스 연결 확인"
          },
          {
            "id": 4,
            "title": "환경 변수 설정 및 구성 파일 작성",
            "description": "프론트엔드 및 백엔드의 환경 변수 설정 및 .env 파일 생성",
            "dependencies": [],
            "details": ".env 파일 생성, 데이터베이스 연결 정보(PostgreSQL, Redis), API 포트 설정, JWT 시크릿 키, 환경 변수 로드 확인, 보안 정보 .gitignore 처리",
            "status": "done",
            "testStrategy": "환경 변수 로드 확인, 프론트엔드에서 API 서버 접속 가능 확인, 데이터베이스 및 Redis 연결 테스트"
          },
          {
            "id": 5,
            "title": "코드 스타일 규칙 적용 및 Git 저장소 초기화",
            "description": "ESLint, Prettier 코드 규칙 설정 및 Git 저장소 초기화",
            "dependencies": [],
            "details": "ESLint 설정 파일 작성, Prettier 설정 파일 작성, 코드 포맷팅 규칙 정의, Git 저장소 초기화(git init), .gitignore 파일 작성(node_modules, .env, .next, dist 등), 초기 커밋 수행",
            "status": "done",
            "testStrategy": "ESLint 린트 검사 실행, Prettier 포맷팅 적용 확인, Git 저장소 상태 확인, .gitignore 규칙이 제대로 작동하는지 검증"
          }
        ]
      },
      {
        "id": 2,
        "title": "데이터베이스 스키마 설계 및 구축",
        "description": "PostgreSQL 데이터베이스 테이블 생성 및 관계 설정",
        "status": "done",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "details": "- PostgreSQL 15 Docker 컨테이너 설정\n- 8개 주요 테이블 생성:\n  * users (사용자)\n  * contents (콘텐츠)\n  * categories (카테고리)\n  * tags (태그)\n  * content_tags (콘텐츠-태그 연결)\n  * bookmarks (북마크)\n  * share_links (공유 링크)\n  * activity_logs (활동 로그)\n- UUID 기본 키 설정\n- Foreign Key 관계 설정\n- 인덱스 최적화",
        "testStrategy": "- 데이터베이스 연결 테스트\n- 테이블 스키마 검증\n- 샘플 데이터 CRUD 테스트\n- Foreign Key 제약조건 테스트",
        "subtasks": [
          {
            "id": 1,
            "title": "PostgreSQL 15 Docker 컨테이너 설정 및 연결 검증",
            "description": "Docker를 통해 PostgreSQL 15 데이터베이스 컨테이너를 설정하고 기본 연결을 검증합니다.",
            "dependencies": [],
            "details": "- PostgreSQL 15 Docker 이미지 풀\n- Docker 볼륨 생성 (pgdata:/var/lib/postgresql/data)\n- 컨테이너 실행 (POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB 환경변수 설정)\n- 포트 5432 매핑\n- localhost:5432 연결 테스트\n- 초기 데이터베이스 생성 확인",
            "status": "done",
            "testStrategy": "- Docker 컨테이너 정상 실행 확인\n- docker ps로 컨테이너 상태 확인\n- psql을 통한 데이터베이스 연결 테스트\n- SELECT 1 쿼리 실행 확인"
          },
          {
            "id": 2,
            "title": "핵심 테이블 생성 (users, contents, categories, tags)",
            "description": "UUID 기본 키를 적용한 사용자, 콘텐츠, 카테고리, 태그 테이블을 설계하고 생성합니다.",
            "dependencies": [
              "2.1"
            ],
            "details": "- users 테이블: UUID pk, email(unique), username, password_hash, created_at, updated_at\n- contents 테이블: UUID pk, user_id(FK), category_id(FK), title, description, file_url, created_at, updated_at\n- categories 테이블: UUID pk, name(unique), description, created_at\n- tags 테이블: UUID pk, name(unique), description, created_at\n- uuid_generate_v4() 함수로 자동 ID 생성\n- created_at, updated_at에 DEFAULT CURRENT_TIMESTAMP 설정",
            "status": "done",
            "testStrategy": "- 각 테이블 생성 성공 확인\n- \\dt 메타커맨드로 테이블 목록 조회\n- \\d 테이블명으로 스키마 구조 검증\n- uuid 자동 생성 확인\n- NOT NULL 제약조건 검증"
          },
          {
            "id": 3,
            "title": "관계형 테이블 및 외래키 설정 (content_tags, bookmarks, share_links)",
            "description": "다대다 관계와 사용자 상호작용 관련 테이블을 생성하고 외래키 관계를 설정합니다.",
            "dependencies": [
              "2.2"
            ],
            "details": "- content_tags 테이블: UUID pk, content_id(FK to contents), tag_id(FK to tags), UNIQUE(content_id, tag_id)\n- bookmarks 테이블: UUID pk, user_id(FK to users), content_id(FK to contents), memo(text), created_at, updated_at\n- share_links 테이블: UUID pk, content_id(FK to contents), shared_by_id(FK to users), expire_date(nullable), created_at\n- 모든 FK에 ON DELETE CASCADE 설정\n- bookmarks에 UNIQUE(user_id, content_id) 제약조건",
            "status": "done",
            "testStrategy": "- FK 제약조건 생성 확인\n- 부모 레코드 없이 자식 레코드 삽입 실패 테스트\n- 부모 레코드 삭제 시 자식 레코드 자동 삭제 확인\n- UNIQUE 제약조건 중복 삽입 실패 테스트"
          },
          {
            "id": 4,
            "title": "활동 로그 테이블 생성 및 인덱스 최적화",
            "description": "활동 로그 테이블을 생성하고 쿼리 성능을 위한 인덱스를 설계 및 적용합니다.",
            "dependencies": [
              "2.2"
            ],
            "details": "- activity_logs 테이블: UUID pk, user_id(FK to users), action_type(varchar), details(jsonb), ip_address(inet), created_at\n- user_id 단일 인덱스 (사용자별 로그 조회)\n- created_at 단일 인덱스 (시간 범위 검색)\n- (user_id, created_at) 복합 인덱스 (자주 함께 조회되는 컬럼)\n- action_type 단일 인덱스 (활동 유형 필터링)\n- details(jsonb)에 GIN 인덱스 (JSON 필드 검색)",
            "status": "done",
            "testStrategy": "- CREATE INDEX 성공 확인\n- \\d activity_logs로 인덱스 목록 확인\n- EXPLAIN ANALYZE로 인덱스 사용 여부 검증\n- 대량 데이터(10만 건) 삽입 후 쿼리 성능 측정"
          },
          {
            "id": 5,
            "title": "스키마 검증 및 통합 테스트",
            "description": "완성된 데이터베이스 스키마의 정합성을 검증하고 샘플 데이터로 CRUD 작업을 테스트합니다.",
            "dependencies": [
              "2.3",
              "2.4"
            ],
            "details": "- 모든 8개 테이블 존재 여부 확인\n- 테이블 간 관계도 시각화 및 검증\n- 샘플 데이터 삽입: 사용자 3명, 콘텐츠 5개, 카테고리 3개, 태그 10개\n- 관계형 데이터 생성: content_tags, bookmarks, share_links\n- 다양한 JOIN 쿼리 실행 테스트\n- UPDATE/DELETE 작업 및 스키마 무결성 확인\n- 트랜잭션 롤백 테스트",
            "status": "done",
            "testStrategy": "- SELECT COUNT(*) FROM information_schema.tables로 테이블 개수 확인\n- pg_dump -s로 스키마 덤프\n- 복잡한 JOIN 쿼리 결과 검증\n- FK 제약조건 위반 시 에러 메시지 확인\n- 샘플 데이터로 필터링, 정렬, 페이지네이션 쿼리 테스트"
          }
        ]
      },
      {
        "id": 3,
        "title": "인증 및 권한 관리 시스템 구현",
        "description": "JWT 기반 인증과 역할 기반 접근 제어(RBAC) 시스템 개발",
        "status": "done",
        "priority": "high",
        "dependencies": [
          "2"
        ],
        "details": "- bcrypt를 이용한 비밀번호 암호화 (10 rounds)\n- JWT 토큰 생성 및 검증 로직\n- 4가지 사용자 역할 구현: ADMIN, HOLDING, BANK, CLIENT\n- 권한 검증 미들웨어 개발\n- Redis를 이용한 세션 관리 (30분 타임아웃)\n- 로그인 실패 5회 시 계정 잠금 (30분)\n- IP 기반 접근 로그 기록",
        "testStrategy": "- 로그인/로그아웃 기능 테스트\n- 토큰 만료 테스트\n- 역할별 권한 검증 테스트\n- 계정 잠금 기능 테스트\n- 세션 타임아웃 테스트",
        "subtasks": [
          {
            "id": 1,
            "title": "bcrypt 기반 비밀번호 암호화 및 검증 시스템 구현",
            "description": "사용자 회원가입 시 bcrypt를 이용한 10 rounds 비밀번호 해싱 및 로그인 시 비밀번호 검증 로직 개발",
            "dependencies": [],
            "details": "- bcrypt 라이브러리 설치 및 설정\n- 비밀번호 해싱 함수 구현 (10 rounds)\n- 비밀번호 검증 함수 구현\n- User 모델에 hashedPassword 필드 추가\n- 회원가입 API에 비밀번호 해싱 로직 적용\n- 보안 최적화: 타이밍 공격 방어",
            "status": "done",
            "testStrategy": "- bcrypt 해시 생성 및 검증 단위 테스트\n- 동일 비밀번호 다른 해시 확인\n- 잘못된 비밀번호 검증 실패 테스트\n- bcrypt rounds 성능 테스트"
          },
          {
            "id": 2,
            "title": "JWT 토큰 생성 및 검증 로직 구현",
            "description": "Access Token과 Refresh Token을 생성하고, 요청마다 토큰을 검증하는 JWT 인증 로직 개발",
            "dependencies": [],
            "details": "- JWT 라이브러리 설치 및 설정\n- Access Token 생성 (권장 15분 유효기간)\n- Refresh Token 생성 (권장 7일 유효기간)\n- 토큰 서명 비밀 키 관리\n- JWT 형식 검증 (헤더, 페이로드, 서명)\n- 토큰 만료 시간 검증\n- 토큰 갱신 API 구현\n- 로그아웃 시 토큰 블랙리스트 관리",
            "status": "done",
            "testStrategy": "- JWT 토큰 생성 및 페이로드 검증\n- 만료된 토큰 검증 실패 테스트\n- 잘못된 서명 토큰 검증 실패 테스트\n- 토큰 갱신 API 기능 테스트\n- 토큰 타이밍 정확도 테스트"
          },
          {
            "id": 3,
            "title": "역할 기반 접근 제어(RBAC) 및 권한 검증 미들웨어 구현",
            "description": "ADMIN, HOLDING, BANK, CLIENT 4가지 사용자 역할을 정의하고, 역할별 API 접근 권한을 검증하는 미들웨어 개발",
            "dependencies": [],
            "details": "- User 모델에 role 필드 추가 (ENUM: ADMIN, HOLDING, BANK, CLIENT)\n- 권한 검증 미들웨어 개발\n- 역할별 권한 매트릭스 정의\n- 보호된 라우트에 권한 검증 적용\n- 권한 부족 시 403 Forbidden 응답\n- 역할별 권한 상속 구조 설계\n- 동적 권한 검증 로직",
            "status": "done",
            "testStrategy": "- 각 역할별 접근 권한 테스트\n- 권한 없는 사용자 접근 거부 테스트\n- 역할 변경 시 권한 즉시 적용 테스트\n- 권한 검증 미들웨어 성능 테스트\n- 역할별 데이터 접근 범위 테스트"
          },
          {
            "id": 4,
            "title": "Redis 기반 세션 관리 및 로그인 실패 계정 잠금 기능",
            "description": "Redis를 이용하여 세션을 관리하고, 로그인 실패 5회 시 계정을 30분간 잠금하는 보안 기능 구현",
            "dependencies": [],
            "details": "- Redis 연결 설정\n- 세션 저장 및 조회 로직 구현\n- 세션 타임아웃 30분 설정\n- 로그인 실패 카운트 로직 구현\n- 5회 실패 시 계정 임시 잠금 기능\n- 잠금 해제 타이머 구현 (30분)\n- 로그인 시 실패 카운트 초기화\n- Redis 키 구조 설계 (user_id:failed_attempts, user_id:locked_until)",
            "status": "done",
            "testStrategy": "- 세션 생성 및 저장 테스트\n- 세션 타임아웃 30분 검증\n- 로그인 실패 카운팅 테스트\n- 5회 실패 후 계정 잠금 확인\n- 잠금 상태에서 로그인 시도 거부 테스트\n- 30분 후 자동 잠금 해제 테스트\n- 성공 로그인 시 실패 카운트 초기화 테스트"
          },
          {
            "id": 5,
            "title": "IP 기반 접근 로그 기록 및 모니터링 시스템",
            "description": "모든 인증 시도와 권한 검증 결과를 IP 주소와 함께 기록하고, 비정상 접근 패턴을 감지하는 로그 시스템 구현",
            "dependencies": [],
            "details": "- 요청 IP 주소 추출 로직 (X-Forwarded-For, X-Real-IP 헤더 고려)\n- authentication_logs 테이블 생성\n- 로그 기록 항목: timestamp, user_id, ip_address, action (login/logout/failed_attempt), result (success/failure), details\n- 접근 로그 기록 미들웨어\n- IP별 접근 통계 조회 API\n- 비정상 IP 접근 감지 로직\n- 로그 조회 및 필터링 API\n- 오래된 로그 자동 삭제 정책 (90일)",
            "status": "done",
            "testStrategy": "- IP 주소 정확하게 추출 테스트\n- 모든 로그인/로그아웃 이벤트 기록 확인\n- 실패한 로그인 시도 기록 테스트\n- IP별 접근 통계 정확도 테스트\n- 동일 IP에서의 대량 실패 시도 감지 테스트\n- 로그 조회 및 필터링 성능 테스트\n- 90일 이상 오래된 로그 자동 삭제 확인"
          }
        ]
      },
      {
        "id": 4,
        "title": "회원 관리 기능 구현",
        "description": "최고관리자 전용 회원 생성, 수정, 조회, 비활성화 기능 개발",
        "status": "done",
        "priority": "high",
        "dependencies": [
          "3"
        ],
        "details": "- 사용자 CRUD API 엔드포인트 구현\n  * POST /api/users - 회원 생성\n  * GET /api/users - 회원 목록 조회\n  * GET /api/users/:id - 회원 상세 조회\n  * PATCH /api/users/:id - 회원 정보 수정\n  * DELETE /api/users/:id - 회원 삭제\n- 회원 유형별 입력 폼 (지주/은행/클라이언트)\n- 초기 비밀번호 자동 생성\n- Nodemailer를 이용한 이메일 발송\n- 비밀번호 초기화 기능\n- 계정 활성화/비활성화",
        "testStrategy": "- 다양한 사용자 유형 생성 테스트\n- 이메일 발송 확인\n- 비밀번호 초기화 플로우 테스트\n- 권한 없는 사용자의 API 접근 차단 테스트",
        "subtasks": [
          {
            "id": 1,
            "title": "사용자 데이터베이스 스키마 및 TypeORM 모델 정의",
            "description": "회원 관리 기능을 위한 사용자 테이블 스키마 확장 및 TypeORM 엔티티 정의. 사용자 유형(지주/은행/클라이언트), 활성화 상태, 비밀번호, 초기 비밀번호 여부, 마지막 로그인 시간 등 필드 포함",
            "dependencies": [],
            "details": "users 테이블에 다음 컬럼 추가: userType (ENUM: LANDLORD, BANK, CLIENT), isActive (boolean), password (hashed), isFirstPassword (boolean), lastLoginAt (timestamp), createdAt, updatedAt. UUID 기본 키, 이메일 유니크 제약조건 설정. TypeORM @Entity 데코레이터로 User 엔티티 클래스 작성",
            "status": "done",
            "testStrategy": "데이터베이스 마이그레이션 실행 후 스키마 검증, 샘플 사용자 데이터 CRUD 테스트"
          },
          {
            "id": 2,
            "title": "사용자 CRUD API 엔드포인트 구현",
            "description": "Express 라우터를 이용하여 5개의 기본 사용자 관리 API 엔드포인트 구현 (생성, 목록 조회, 상세 조회, 정보 수정, 삭제). 모든 엔드포인트는 관리자 권한 검증 필요",
            "dependencies": [
              "4.1"
            ],
            "details": "POST /api/users (사용자 생성), GET /api/users (목록 조회 - 페이지네이션), GET /api/users/:id (상세 조회), PATCH /api/users/:id (정보 수정), DELETE /api/users/:id (소프트 삭제). 각 엔드포인트에서 요청 데이터 검증 및 에러 핸들링 구현. Service 계층에서 비즈니스 로직 분리",
            "status": "done",
            "testStrategy": "Postman/Jest로 각 엔드포인트 요청/응답 검증, 유효성 검증 테스트, 데이터베이스 상태 확인"
          },
          {
            "id": 3,
            "title": "초기 비밀번호 자동 생성 및 Nodemailer 이메일 발송 시스템 구현",
            "description": "사용자 생성 시 자동으로 임시 비밀번호 생성하여 사용자 이메일로 발송하는 기능 구현. Nodemailer를 이용하여 Gmail SMTP 서버를 통한 메일 전송",
            "dependencies": [
              "4.2"
            ],
            "details": "crypto 모듈로 임시 비밀번호 생성 (8-12자 영문/숫자/특수문자 조합). Nodemailer 설정 파일 작성: createTransport()로 Gmail SMTP 연결 설정 (host: smtp.gmail.com, port: 587, auth: {user, pass}). 환경변수(.env)에 발신 이메일, 앱 비밀번호 저장. sendMail() 함수로 메일 발송, HTML 템플릿으로 전문적인 이메일 포맷 작성",
            "status": "done",
            "testStrategy": "테스트 이메일 계정으로 메일 발송 확인, 임시 비밀번호 형식 검증, 메일 전송 실패 시 에러 핸들링 테스트, 이메일 템플릿 렌더링 확인"
          },
          {
            "id": 4,
            "title": "비밀번호 초기화 및 계정 활성화/비활성화 기능 구현",
            "description": "사용자가 비밀번호를 잊었을 때 초기화 요청 처리 및 새로운 임시 비밀번호 발급 기능. 관리자가 사용자 계정을 활성화/비활성화할 수 있는 기능 구현",
            "dependencies": [
              "4.3"
            ],
            "details": "POST /api/users/:id/reset-password (비밀번호 초기화 요청): 새 임시 비밀번호 생성 후 이메일 발송, 데이터베이스에 isFirstPassword = true 저장. PATCH /api/users/:id/activate (계정 활성화), PATCH /api/users/:id/deactivate (계정 비활성화): isActive 필드 업데이트. 비활성화된 사용자는 로그인 불가 처리 (인증 미들웨어에서 검증)",
            "status": "done",
            "testStrategy": "비밀번호 초기화 플로우 전체 테스트, 이메일 발송 확인, 활성화/비활성화 상태 변경 확인, 비활성화 사용자 로그인 시도 차단 테스트"
          },
          {
            "id": 5,
            "title": "관리자 권한 검증 및 사용자 유형별 입력 데이터 검증 미들웨어 구현",
            "description": "모든 회원 관리 API에 관리자 권한 검증을 적용하는 미들웨어 구현. 사용자 유형별(지주/은행/클라이언트) 필수 입력 필드 검증 로직 개발",
            "dependencies": [
              "4.2",
              "4.4"
            ],
            "details": "adminAuthMiddleware: JWT 토큰 검증 후 role = 'ADMIN' 확인, 권한 없으면 403 Forbidden 반환. userTypeValidationMiddleware: userType에 따라 다른 필드 검증 (지주: companyName, landholderType; 은행: bankName, bankCode; 클라이언트: departmentName). Joi/express-validator로 스키마 정의. 모든 회원 관리 엔드포인트 라우터에 미들웨어 체인 적용",
            "status": "done",
            "testStrategy": "관리자 권한 없는 사용자의 API 요청 차단 테스트, 각 사용자 유형별 필수 필드 누락 시 검증 실패 테스트, 잘못된 데이터 형식 검증 테스트, 유효한 권한과 데이터로 요청 성공 테스트"
          }
        ]
      },
      {
        "id": 5,
        "title": "파일 업로드 시스템 구현",
        "description": "다중 파일 업로드 및 파일 저장 시스템 개발",
        "status": "in-progress",
        "priority": "high",
        "dependencies": [
          "2",
          "3"
        ],
        "details": "- Multer를 이용한 파일 업로드 처리\n- 최대 200MB 파일 크기 제한\n- 지원 파일 형식: JPG, PNG, GIF, PDF, MP4, MOV, PSD, AI, ZIP\n- 다중 파일 동시 업로드\n- 드래그 앤 드롭 UI 구현\n- Sharp 라이브러리를 이용한 썸네일 생성 (300x300px)\n- 프로젝트 내 파일 저장소 (/uploads)\n- 업로드 진행률 표시",
        "testStrategy": "- 지원 파일 형식 업로드 테스트\n- 200MB 초과 파일 차단 테스트\n- 다중 파일 업로드 테스트\n- 썸네일 생성 확인\n- 드래그 앤 드롭 기능 테스트",
        "subtasks": [
          {
            "id": 1,
            "title": "Backend: Multer 설정 및 파일 검증 시스템 구축",
            "description": "Node.js/Express 백엔드에서 Multer 미들웨어를 설정하고, 파일 크기 제한(200MB), 지원 파일 형식(JPG, PNG, GIF, PDF, MP4, MOV, PSD, AI, ZIP) 검증 로직을 구현합니다. 파일 업로드 요청에 대한 필터링 및 에러 핸들링을 포함합니다.",
            "dependencies": [],
            "details": "1. multer 패키지 설치 및 설정 파일 생성 (/backend/config/multer.js)\n2. 파일 크기 제한 설정: limits.fileSize = 200 * 1024 * 1024 (200MB)\n3. MIME 타입 검증 로직 구현: MIME_TYPE_MAP 객체 생성\n4. 지원 확장자 목록 정의 (jpg, png, gif, pdf, mp4, mov, psd, ai, zip)\n5. fileFilter 함수 구현 - 허용되지 않는 파일 형식 거부\n6. 에러 핸들링 미들웨어 작성 (파일 크기 초과, 형식 오류)\n7. multerUpload 래퍼 함수 구현 및 export",
            "status": "done",
            "testStrategy": "- 각 지원 파일 형식으로 업로드 테스트\n- 200MB 이상 파일 업로드 시 에러 반환 확인\n- 지원하지 않는 형식(.exe, .sh 등) 차단 테스트\n- 파일 크기 경계값(199MB, 200MB, 201MB) 테스트"
          },
          {
            "id": 2,
            "title": "Backend: 파일 저장소 및 디렉토리 구조 설정",
            "description": "프로젝트 내 파일 저장소 구조를 설정하고, 디렉토리 생성 로직을 구현합니다. 업로드된 파일과 생성된 썸네일을 구분하여 저장하며, 파일 시스템 관리를 위한 유틸리티 함수를 작성합니다.",
            "dependencies": [
              "5.1"
            ],
            "details": "1. 디렉토리 구조 설계:\n   - /uploads/originals - 원본 파일 저장\n   - /uploads/thumbnails - 썸네일 저장\n   - /uploads/temp - 임시 파일\n2. fs 모듈을 이용한 디렉토리 자동 생성 함수 작성\n3. 파일명 생성 로직 구현 (UUID + 타임스탐프 + 원본파일명)\n4. 디렉토리 경로 상수 정의 (/backend/constants/paths.js)\n5. 파일 시스템 초기화 함수 작성 (앱 시작 시 필요한 디렉토리 생성)\n6. 권한 설정 및 정리 로직 (업로드 완료 후 임시 파일 정소)",
            "status": "done",
            "testStrategy": "- 서버 시작 시 필요한 디렉토리 자동 생성 확인\n- 파일명 생성 로직이 고유한 파일명 생성하는지 테스트\n- 원본과 썸네일이 올바른 디렉토리에 저장되는지 확인\n- 임시 파일 정리 기능 테스트"
          },
          {
            "id": 3,
            "title": "Backend: 파일 업로드 API 엔드포인트 개발",
            "description": "Express 라우터에서 파일 업로드 POST 엔드포인트를 구현합니다. Multer 미들웨어를 적용하고, 업로드 성공/실패 시 응답을 처리합니다. 데이터베이스에 파일 메타데이터를 저장합니다.",
            "dependencies": [
              "5.2"
            ],
            "details": "1. 파일 업로드 라우터 작성 (/backend/routes/upload.js)\n2. POST /api/upload 엔드포인트 구현\n   - Multer 미들웨어 적용 (.array('files', 10) - 최대 10개)\n   - 요청 검증 로직\n3. 업로드 처리 로직:\n   - req.files 배열 순회\n   - 각 파일의 메타데이터 추출 (파일명, 크기, 타입)\n   - 데이터베이스에 파일 정보 저장\n4. 응답 객체 구성:\n   - 성공: { success: true, files: [{id, name, size, url, ...}] }\n   - 실패: { success: false, error: 'message' }\n5. 에러 핸들링 (try-catch, 데이터베이스 오류)\n6. HTTP 상태 코드 설정 (201 성공, 400/413/422 오류)",
            "status": "in-progress",
            "testStrategy": "- 단일 파일 업로드 테스트\n- 다중 파일 동시 업로드 테스트 (5개, 10개)\n- 10개 초과 파일 업로드 거부 확인\n- 응답 데이터 형식 검증\n- 데이터베이스에 파일 메타데이터 저장 확인\n- 서버 에러 응답 테스트"
          },
          {
            "id": 4,
            "title": "Frontend: 드래그 앤 드롭 UI 컴포넌트 및 다중 파일 선택 구현",
            "description": "Next.js React 컴포넌트에서 드래그 앤 드롭 기능과 파일 선택 입력을 구현합니다. 사용자가 파일을 드래그하거나 클릭으로 선택할 수 있는 인터페이스를 만들고, 선택된 파일 목록을 표시합니다.",
            "dependencies": [
              "5.3"
            ],
            "details": "1. FileUpload 컴포넌트 작성 (/frontend/components/FileUpload.tsx)\n2. 드래그 앤 드롭 영역 구현:\n   - onDragOver, onDragLeave, onDrop 이벤트 핸들러\n   - 드래그 상태 시각적 피드백 (배경 색상 변화)\n3. 파일 입력 요소:\n   - <input type=\"file\" multiple accept=\".jpg,.png,...\"/>\n   - 클릭 시 파일 선택 다이얼로그 열기\n4. 선택된 파일 목록 표시:\n   - 파일명, 크기, 타입 표시\n   - 각 파일별 제거 버튼\n   - 스크롤 가능한 리스트 UI\n5. 상태 관리 (useState):\n   - selectedFiles: File[]\n   - dragActive: boolean\n   - fileList: {name, size, type}[]\n6. 파일 검증 UI 피드백 (크기 초과, 형식 불일치 경고)",
            "status": "pending",
            "testStrategy": "- 드래그 앤 드롭으로 파일 선택 테스트\n- 클릭으로 파일 선택 다이얼로그 열림 확인\n- 다중 파일 선택 (5개, 10개 선택)\n- 선택된 파일 목록 올바르게 표시되는지 확인\n- 파일 제거 버튼 기능 테스트\n- 드래그 상태 시각적 피드백 확인\n- 모바일 터치 이벤트 호환성 테스트"
          },
          {
            "id": 5,
            "title": "Frontend & Backend: 썸네일 생성 및 업로드 진행률 표시 기능",
            "description": "Sharp 라이브러리를 이용해 이미지 썸네일을 300x300px 크기로 생성하고, 프론트엔드에서 업로드 진행률을 실시간으로 표시합니다. XMLHttpRequest 또는 Fetch API의 upload 이벤트를 활용합니다.",
            "dependencies": [
              "5.4"
            ],
            "details": "Backend 구현:\n1. Sharp 라이브러리 설치 및 설정\n2. 썸네일 생성 함수 작성 (/backend/utils/thumbnail.js):\n   - 지원 이미지 형식(JPG, PNG, GIF) 확인\n   - sharp().resize(300, 300).toFile() 실행\n   - 썸네일 저장 경로: /uploads/thumbnails/\n3. 파일 업로드 엔드포인트에 썸네일 생성 로직 추가\n4. 썸네일 URL을 응답에 포함\n\nFrontend 구현:\n1. XMLHttpRequest를 이용한 파일 업로드:\n   - FormData에 파일 배열 추가\n   - xhr.upload.onprogress 이벤트 리스너\n   - (event.loaded / event.total) * 100 으로 진행률 계산\n2. 진행률 표시 UI:\n   - 전체 진행률 프로그레스 바\n   - 파일별 개별 진행률 표시\n   - 진행 중인 파일명 및 퍼센트 표시\n3. 업로드 완료 후 결과 표시:\n   - 성공한 파일 목록\n   - 실패한 파일 목록 (에러 메시지 포함)\n   - 썸네일 미리보기 표시",
            "status": "pending",
            "testStrategy": "- 이미지 파일 업로드 시 썸네일 자동 생성 확인\n- 썸네일이 정확히 300x300px 크기인지 검증\n- 비이미지 파일(PDF, MP4)은 썸네일 생성 안 함 확인\n- 업로드 진행률이 0%에서 100%로 부드럽게 증가하는지 확인\n- 네트워크 속도 시뮬레이션 후 진행률 표시 정확도 테스트\n- 다중 파일 업로드 시 각 파일의 개별 진행률 표시 테스트\n- 업로드 실패 시 에러 핸들링 및 UI 업데이트 확인\n- 모바일 환경에서 진행률 UI 가독성 테스트"
          }
        ]
      },
      {
        "id": 6,
        "title": "OCR 기반 태그 자동 생성 시스템",
        "description": "Google Cloud Vision API 연동을 통한 이미지 텍스트 인식 및 자동 태그 생성",
        "status": "pending",
        "priority": "high",
        "dependencies": [
          "5"
        ],
        "details": "- Google Cloud Vision API 설정 및 연동\n- 이미지 업로드 시 OCR 자동 실행\n- TEXT_DETECTION 기능 사용\n- 한글/영문 텍스트 추출\n- 추출된 텍스트 전처리 (특수문자 제거, 정규화)\n- 자동 태그 생성 로직\n- 빈도 기반 인기 태그 추천\n- 태그 수동 추가/수정/삭제 기능",
        "testStrategy": "- 다양한 이미지로 OCR 정확도 테스트\n- 한글/영문 혼합 텍스트 인식 테스트\n- 태그 자동 생성 로직 검증\n- 인기 태그 추천 기능 테스트\n- API 오류 핸들링 테스트"
      },
      {
        "id": 7,
        "title": "통합 검색 엔진 구현",
        "description": "Elasticsearch 기반 실시간 검색 기능 개발",
        "status": "pending",
        "priority": "high",
        "dependencies": [
          "2",
          "6"
        ],
        "details": "- Elasticsearch 설정 및 인덱스 매핑\n- 콘텐츠 메타데이터 인덱싱\n- OCR 텍스트 인덱싱\n- 복합 검색 쿼리 구현:\n  * 키워드 검색 (제목, 태그, 설명)\n  * 카테고리 필터\n  * 날짜 범위 필터\n  * 파일 유형 필터\n  * 업로더 필터\n- 태그 클릭 검색\n- 검색 결과 페이징 (10개/페이지)\n- 2초 이내 응답 시간 최적화",
        "testStrategy": "- 키워드 검색 정확도 테스트\n- 복합 조건 검색 테스트\n- 응답 시간 측정 (2초 이내)\n- 필터 조합 테스트\n- 대량 데이터 검색 성능 테스트"
      },
      {
        "id": 8,
        "title": "카테고리 관리 시스템 구현",
        "description": "회원 유형별 카테고리 생성 및 관리 기능 개발",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "2",
          "3"
        ],
        "details": "- 1차/2차 카테고리 계층 구조 구현\n- 회원 유형별 기본 카테고리 세팅:\n  * 신한금융지주: CSR, 브랜드, 스포츠, 기타\n  * 신한은행: 브랜드 PR, 상품&서비스, 땡겨요, 기타\n- 카테고리 CRUD API:\n  * POST /api/categories - 카테고리 생성\n  * GET /api/categories - 카테고리 목록\n  * PATCH /api/categories/:id - 카테고리 수정\n  * DELETE /api/categories/:id - 카테고리 삭제\n- 카테고리 순서 변경 기능\n- 드래그 앤 드롭 UI",
        "testStrategy": "- 다단계 카테고리 생성 테스트\n- 사용자 유형별 카테고리 필터링 테스트\n- 순서 변경 기능 검증\n- 카테고리 삭제 시 연관 콘텐츠 처리 테스트"
      },
      {
        "id": 9,
        "title": "콘텐츠 관리 및 공유 기능 구현",
        "description": "콘텐츠 수정 권한 관리 및 공유 링크 생성 시스템 개발",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "3",
          "5"
        ],
        "details": "- 콘텐츠 업로드 후 30분 수정 제한 로직\n- editable_until 필드 관리\n- 최고관리자의 수정 시간 연장 기능\n- 공유 링크 생성 (JWT 토큰 기반)\n- 공유 링크 유효기간 설정 (1일, 7일, 30일, 무제한)\n- 목록/상세페이지에서 공유 기능\n- 다중 콘텐츠 공유 링크\n- 이메일로 공유 링크 발송\n- 공유 링크 복사 기능",
        "testStrategy": "- 30분 경과 후 수정 차단 테스트\n- 관리자 수정 시간 연장 테스트\n- 공유 링크 생성 및 접근 테스트\n- 만료된 링크 차단 테스트\n- 다중 콘텐츠 공유 테스트"
      },
      {
        "id": 10,
        "title": "마이페이지 기능 구현",
        "description": "사용자별 콘텐츠 보관함, 메모, 업로드 이력 관리",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "5",
          "7"
        ],
        "details": "- 마이페이지 API 엔드포인트:\n  * GET /api/mypage/bookmarks - 보관함 목록\n  * POST /api/mypage/bookmarks - 북마크 추가\n  * DELETE /api/mypage/bookmarks/:id - 북마크 삭제\n  * PATCH /api/mypage/bookmarks/:id/memo - 메모 수정\n  * GET /api/mypage/uploads - 내 업로드 목록\n  * GET /api/mypage/recent - 최근 본 콘텐츠\n- 콘텐츠별 개인 메모 기능\n- 계정 정보 수정 (비밀번호 변경)\n- 마이페이지 UI 구현",
        "testStrategy": "- 북마크 추가/삭제 테스트\n- 메모 작성/수정 테스트\n- 업로드 이력 조회 테스트\n- 최근 본 콘텐츠 추적 테스트\n- 비밀번호 변경 기능 테스트"
      },
      {
        "id": 11,
        "title": "활동 로그 및 모니터링 시스템",
        "description": "모든 사용자 활동 기록 및 관리자 모니터링 대시보드 개발",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "3",
          "4",
          "5"
        ],
        "details": "- 모든 활동 자동 로깅:\n  * 업로드, 수정, 삭제\n  * 로그인, 로그아웃\n- 로그 기록 항목:\n  * 시간 (created_at)\n  * 계정 (user_id)\n  * IP 주소 (ip_address)\n  * 활동 내용 (action_type, details)\n- 로그 조회 API:\n  * GET /api/logs - 활동 로그 조회\n  * GET /api/logs/export - Excel 내보내기\n- 필터링 기능 (기간별, 사용자별, 활동 유형별)\n- Excel 내보내기 (SheetJS)",
        "testStrategy": "- 모든 주요 활동 로그 기록 검증\n- IP 주소 정확도 테스트\n- 필터링 기능 테스트\n- Excel 내보내기 포맷 검증\n- 대량 로그 성능 테스트"
      },
      {
        "id": 12,
        "title": "UI/UX 디자인 시스템 구현",
        "description": "신한금융 디자인 가이드에 따른 반응형 UI 컴포넌트 개발",
        "status": "pending",
        "priority": "medium",
        "dependencies": [
          "1"
        ],
        "details": "- Tailwind CSS 설정 (Shinhan Blue #0046FF)\n- 컬러 시스템 설정:\n  * Primary: #0046FF\n  * Secondary: #333333\n  * Background: #F5F5F5\n  * Border: #E0E0E0\n  * Error: #E53935\n  * Success: #43A047\n- 반응형 브레이크포인트:\n  * Desktop: ≥1280px (1200px 콘텐츠)\n  * Tablet: 768px~1279px\n  * Mobile: <768px\n- 갤러리 뷰 (썸네일 그리드, 2/3/4열)\n- 게시물 뷰 (리스트 형식)\n- 네비게이션 헤더\n- 푸터\n- 공통 컴포넌트 라이브러리",
        "testStrategy": "- 크로스 브라우저 테스트 (Chrome, Safari, Edge, Firefox)\n- 반응형 레이아웃 테스트\n- 접근성 테스트 (키보드 네비게이션)\n- 터치 이벤트 테스트 (모바일)\n- 1280x720 최소 해상도 테스트",
        "subtasks": [
          {
            "id": 1,
            "title": "Tailwind CSS 설정 및 컬러 시스템 구현",
            "description": "Tailwind CSS 초기 설정 및 신한금융 디자인 가이드에 따른 색상 체계 구축. 프로젝트에서 사용할 모든 색상 토큰을 중앙 집중식으로 관리하여 일관된 디자인 시스템 기반 마련",
            "dependencies": [],
            "details": "tailwind.config.js 파일 생성 및 커스텀 색상 정의 (Primary #0046FF, Secondary #333333, Background #F5F5F5, Border #E0E0E0, Error #E53935, Success #43A047). CSS 변수 또는 Tailwind extend 기능을 활용하여 색상 토큰 중앙화. PostCSS 설정 및 purge 옵션 구성. utility-first CSS 접근 방식 적용 및 커스텀 클래스 정의 가이드 작성.",
            "status": "pending",
            "testStrategy": "각 색상 토큰이 올바르게 렌더링되는지 확인. 브라우저 개발자 도구에서 색상값 검증. 컬러 접근성 기준(WCAG 대비도) 확인."
          },
          {
            "id": 2,
            "title": "반응형 브레이크포인트 및 그리드 시스템 구축",
            "description": "신한금융 디자인 기준에 따른 반응형 브레이크포인트 정의 및 CSS 그리드/Flexbox 시스템 구현. 콘텐츠 기준으로 브레이크포인트를 설정하여 모든 기기에서 최적의 사용자 경험 제공",
            "dependencies": [
              "12.1"
            ],
            "details": "Tailwind 설정에 브레이크포인트 추가 (Mobile <768px, Tablet 768-1279px, Desktop ≥1280px). 모바일 우선 접근 방식 적용. 반응형 그리드 시스템 정의 (12컬럼 그리드). media query 규칙 정의 및 문서화. 유동적 레이아웃을 위한 상대 단위(rem, %) 사용 규칙 정립. Flexbox와 CSS Grid를 활용한 레이아웃 패턴 구성.",
            "status": "pending",
            "testStrategy": "각 브레이크포인트에서 레이아웃이 올바르게 변경되는지 확인. 브라우저 DevTools에서 반응형 모드로 테스트. 콘텐츠 흐름이 자연스러운지 검증."
          },
          {
            "id": 3,
            "title": "공통 컴포넌트 라이브러리 기본 구조 및 스타일 적용",
            "description": "프로젝트 전체에서 재사용될 기본 UI 컴포넌트 개발. 버튼, 텍스트, 카드, 입력 필드 등의 기초 컴포넌트를 구현하고 반응형 스타일 적용",
            "dependencies": [
              "12.2"
            ],
            "details": "Button 컴포넌트 (Primary, Secondary, Disabled 상태). Typography 시스템 (Heading, Body, Caption). Card 컴포넌트 (기본 카드 구조). Input/Form 컴포넌트 (텍스트 입력, 에러 상태). Badge, Icon 기본 컴포넌트. 각 컴포넌트에 대한 Storybook 문서 작성. 반응형 패딩/마진 적용. 다크 모드 대응 기본 구조(선택사항).",
            "status": "pending",
            "testStrategy": "각 컴포넌트의 모든 상태(기본, hover, active, disabled, error) 시각적 확인. 접근성 속성(aria-label, role) 검증. 터치 타겟 크기 확인 (최소 44x44px)."
          },
          {
            "id": 4,
            "title": "네비게이션 헤더 및 푸터 컴포넌트 개발",
            "description": "반응형 네비게이션 헤더와 푸터 구현. 모바일에서는 햄버거 메뉴, 데스크톱에서는 수평 네비게이션 제공",
            "dependencies": [
              "12.3"
            ],
            "details": "Header 컴포넌트 구조: 신한금융 로고, 네비게이션 메뉴, 사용자 영역(프로필/로그아웃). 모바일 반응형 메뉴 (드로어 메뉴 또는 모바일 폰트 햄버거). 스티키 헤더 옵션 구현. Footer 컴포넌트: 링크 그룹, 저작권 정보, 소셜 링크. 반응형 레이아웃 (Desktop: 1열, Tablet: 2열, Mobile: 스택 레이아웃). 키보드 네비게이션 지원. 호버/포커스 상태 스타일링.",
            "status": "pending",
            "testStrategy": "모든 브레이크포인트에서 레이아웃 변경 확인. 모바일 메뉴 열기/닫기 동작 테스트. 키보드 Tab 키로 모든 링크 접근 가능 확인. 터치 친화적 버튼 크기 검증."
          },
          {
            "id": 5,
            "title": "갤러리 및 게시물 뷰 구현 및 반응형 레이아웃 통합",
            "description": "썸네일 그리드 갤러리 뷰와 게시물 리스트 뷰 구현. 각 뷰에서 반응형 컬럼 수 조정 (모바일 2열, 태블릿 3열, 데스크톱 4열) 및 접근성 검증 완료",
            "dependencies": [
              "12.4"
            ],
            "details": "Gallery View: 반응형 그리드 레이아웃 (Mobile: 2열, Tablet: 3열, Desktop: 4열). 썸네일 이미지 최적화(lazy loading, srcset). 호버 시 정보 표시(오버레이). Post View: 리스트 형식으로 게시물 표시. 각 아이템에 메타 정보(작성자, 날짜, 카테고리) 포함. 반응형 스택 레이아웃 (모바일: 세로 스택). 페이지네이션 또는 무한 스크롤 UI. 크로스 브라우저 호환성 검증 (Chrome, Safari, Firefox, Edge). 터치 이벤트 처리 (탭, 스와이프) 최적화.",
            "status": "pending",
            "testStrategy": "모든 브레이크포인트에서 컬럼 수 변경 확인. 이미지 로딩 성능 측정. 크로스 브라우저 테스트(4개 주요 브라우저). 접근성 검증(색상 대비, 스크린 리더, 키보드 네비게이션). 1280x720 최소 해상도에서 레이아웃 검증. 모바일 터치 이벤트 테스트."
          }
        ]
      }
    ],
    "metadata": {
      "projectName": "신한금융 광고관리 플랫폼",
      "totalTasks": 12,
      "sourceFile": ".taskmaster/docs/prd.md",
      "generatedAt": "2025-12-11",
      "created": "2025-12-11T00:39:24.625Z",
      "description": "Tasks for master context",
      "updated": "2025-12-11T01:08:56.366Z"
    }
  }
}